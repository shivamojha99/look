{"version":3,"sources":["routes/CreateRoom.js","routes/PhotoCapture.js","routes/Room.js","App.js","reportWebVitals.js","index.js"],"names":["useStyles","makeStyles","theme","root","margin","spacing","root2","width","root3","flexGrow","paper","padding","textAlign","color","palette","text","secondary","CreateRoom","props","classes","useState","inputVal","setInput","cards","setcard","useEffect","photos","localStorage","getItem","JSON","parse","console","log","card","forEach","photo","ph1","ph2","push","className","Grid","container","item","xs","Paper","emoji","Typography","gutterBottom","variant","component","state","Button","id","onClick","uuid","history","TextField","required","label","defaultValue","onChange","Event","target","value","disabled","PhotoCapture","height","streaming","userVideo","document","getElementById","partnerVideo","canvas","partnerCanvas","capturePictures","clearphoto","context","getContext","fillStyle","fillRect","toDataURL","context1","drawImage","data","takepicture","setAttribute","maxWidth","media","Room","useRef","peerRef","socketRef","otherUser","userStream","createPeer","userID","peer","RTCPeerConnection","iceServers","urls","credential","username","onicecandidate","handleICECandidateEvent","ontrack","handleTrackEvent","onnegotiationneeded","current","createOffer","then","offer","setLocalDescription","payload","caller","sdp","localDescription","emit","catch","e","handleNegotiationNeededEvent","handleRecieveCall","incoming","desc","RTCSessionDescription","setRemoteDescription","getTracks","track","addTrack","createAnswer","answer","handleAnswer","message","candidate","handleNewICECandidateMsg","RTCIceCandidate","addIceCandidate","srcObject","streams","navigator","mediaDevices","getUserMedia","audio","video","stream","setItem","io","connect","match","params","roomID","on","callUser","Card","CardActionArea","autoPlay","ref","CardContent","CardActions","size","cnt","alert","myvar","setInterval","axiosConfig","headers","data1","data2","a","axios","post","r","slice","length","status","clearInterval","stop","close","stringify","setTimeout","App","path","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.86c2814e.chunk.js","sourcesContent":["import React , { useState , useEffect } from \"react\";\r\nimport { v1 as uuid } from \"uuid\";\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > *': {\r\n      margin: theme.spacing(1),\r\n    },\r\n  },\r\n  root2: {\r\n    '& .MuiTextField-root': {\r\n      margin: theme.spacing(1),\r\n      width: '25ch',\r\n    },\r\n  },\r\n  root3: {\r\n    flexGrow: 1,\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    textAlign: 'center',\r\n    color: theme.palette.text.secondary,\r\n  },\r\n\r\n}));\r\n\r\nconst CreateRoom = (props) => {\r\n\r\n    const classes = useStyles();\r\n\r\n    var [ inputVal , setInput ] = useState(null);\r\n    var [cards , setcard ] = useState([]);\r\n\r\n    useEffect( () => {\r\n        var photos = localStorage.getItem('photos'); //console.log(photos);\r\n        if( localStorage.getItem('photos') )\r\n        {\r\n            photos = JSON.parse(localStorage.getItem('photos')); console.log(photos);\r\n            var card = [];\r\n            photos.forEach( photo => {\r\n                // photo => [{state , emoji , baseurl } *2  ]\r\n                var ph1 = photo[0];\r\n                var ph2 = photo[1];\r\n                card.push(\r\n                  <div className={classes.root3}>\r\n                  <Grid container spacing={3}>\r\n                    <Grid item xs={6}> \r\n                      <Paper className={classes.paper}> \r\n                      {/* <img src={ph1.baseurl} alt=\"img\" width=\"300\" height=\"300\" ></img>  */}\r\n                       {ph1.emoji}\r\n                      <Typography gutterBottom variant=\"h5\" component=\"h2\">{ph1.state} </Typography>\r\n                      </Paper>\r\n                    </Grid>\r\n                    <Grid item xs={6}> \r\n                      <Paper className={classes.paper}>\r\n                      {/* <img src={ph2.baseurl} alt=\"img\" width=\"300\" height=\"300\" ></img>  */}\r\n                      {ph2.emoji}\r\n                      <Typography gutterBottom variant=\"h5\" component=\"h2\">{ph2.state} </Typography>\r\n                      </Paper>\r\n                    </Grid>\r\n                  </Grid>\r\n                  </div>\r\n                );\r\n            });\r\n            setcard(card);\r\n        }\r\n      else cards.push(<div> </div>);\r\n\r\n    } , [ localStorage.getItem('photos')] );\r\n    \r\n    \r\n    function createRoom() {\r\n        const id = uuid();\r\n        props.history.push(`/room/${id}`);\r\n    }\r\n    function joinRoom( ) {\r\n        console.log(inputVal);\r\n        props.history.push(`/room/${inputVal}`);\r\n    }\r\n\r\n    return <div>\r\n            <div className={classes.root3}>\r\n                <Grid container spacing={4}>\r\n                    \r\n                    <Grid item xs={3}>\r\n                      <Button id=\"createbtn\" onClick={createRoom} variant=\"contained\" color=\"primary\" >Create Room</Button> \r\n                    </Grid>\r\n                     \r\n                    {/* <input type=\"text\" id=\"roomId\" onChange= { ( Event) => setInput( Event.target.value ) }></input> */}\r\n                    <Grid item xs={3}>\r\n                      <TextField required id=\"roomId\" label=\"Enter RoomId\" defaultValue=\"\" onChange= { ( Event) => setInput( Event.target.value ) } />\r\n                      <Button id=\"joinbtn\" onClick ={joinRoom} variant=\"contained\" color=\"secondary\" > Join ROOM</Button>\r\n                    </Grid>\r\n                    <Grid item xs={3}>\r\n                      <Button id=\"hangbtn\" variant=\"contained\" disabled > Hang Up </Button> \r\n                    </Grid>\r\n                </Grid>\r\n            </div>\r\n            <div>{cards}</div>\r\n          </div>;\r\n}\r\n\r\nexport default CreateRoom;","\r\nconst PhotoCapture  = ( props ) => {\r\n\r\n    var width = 500;    // We will scale the photo width to this\r\n    var height = 500;     // This will be computed based on the input stream\r\n\r\n    var streaming = localStorage.getItem('cam');  //console.log(streaming);\r\n\r\n    var userVideo = document.getElementById('video');\r\n    var partnerVideo = document.getElementById('partnerVideo');\r\n    var canvas = document.getElementById('canvas'); //console.log(canvas);\r\n    var partnerCanvas = document.getElementById('partnerCanvas');\r\n    var photo = document.getElementById('photo');\r\n    var startbutton = document.getElementById('startbutton');\r\n    var capturePictures = [];\r\n\r\n    if (streaming && !( userVideo == null) ) {\r\n    // height = userVideo.videoHeight / (userVideo.videoWidth/width);\r\n    \r\n    // if (isNaN(height)) {\r\n    //     height = width / (4/3);\r\n    // }\r\n    \r\n    // userVideo.setAttribute('width', width);\r\n    // userVideo.setAttribute('height', height);\r\n    // if( ! partnerVideo === null )\r\n    // {\r\n    //   partnerVideo.setAttribute('height', height);\r\n    //   // partnerVideo.setAttribute('width', width);\r\n    // }\r\n    canvas.setAttribute('width', width);\r\n    canvas.setAttribute('height', height);\r\n    partnerCanvas.setAttribute('width', width);\r\n    partnerCanvas.setAttribute('height', height);\r\n    \r\n    }\r\n\r\n    // startbutton.addEventListener('click', (ev) => {\r\n    //   takepicture();\r\n    //   ev.preventDefault();\r\n    // }, false);\r\n    if( !( userVideo === null ))\r\n    clearphoto();\r\n\r\n  function clearphoto() {\r\n    var context = canvas.getContext('2d');\r\n    context.fillStyle = \"#AAA\";\r\n    context.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n    var data = canvas.toDataURL('image/png');\r\n    // photo.setAttribute('src', data);\r\n\r\n    var context1 = partnerCanvas.getContext('2d');\r\n    context1.fillStyle = \"#AAA\";\r\n    context1.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n    // var data = partnerCanvas.toDataURL('image/png');\r\n\r\n    takepicture()\r\n  }\r\n\r\n  function convertURIToImageData(URI) {\r\n    return new Promise(function(resolve, reject) {\r\n      if (URI == null) return reject();\r\n      var canvas = document.createElement('canvas'),\r\n          context = canvas.getContext('2d'),\r\n          image = new Image();\r\n      image.addEventListener('load', function() {\r\n        canvas.width = image.width;\r\n        canvas.height = image.height;\r\n        context.drawImage(image, 0, 0, canvas.width, canvas.height);\r\n        resolve(context.getImageData(0, 0, canvas.width, canvas.height));\r\n      }, false);\r\n      image.src = URI;\r\n    });\r\n  }\r\n  \r\n  function takepicture() {\r\n    var context = canvas.getContext('2d');\r\n    var context1 = partnerCanvas.getContext('2d');\r\n    if (width && height) {\r\n      canvas.width = width;\r\n      canvas.height = height;\r\n      context.drawImage(userVideo, 0, 0, width, height);\r\n      // console.log(canvas);\r\n      var data = canvas.toDataURL('image/png');\r\n      // photo.setAttribute('src', data);\r\n    \r\n      capturePictures.push(data);\r\n      \r\n      partnerCanvas.width = width;\r\n      partnerCanvas.height = height;\r\n      context1.drawImage(partnerVideo, 0, 0, width, height);\r\n      // console.log(partnerCanvas);\r\n      data = partnerCanvas.toDataURL('image/png');\r\n      // photo.setAttribute('src', data);\r\n    \r\n      capturePictures.push(data);\r\n\r\n    // convertURIToImageData( data ).then(function(imageData) {\r\n        // Here you can use imageData\r\n        // console.log(imageData);\r\n      // });\r\n\r\n    } else {\r\n      clearphoto();\r\n    }\r\n  }\r\n\r\n  return capturePictures;\r\n\r\n}\r\n\r\nexport default PhotoCapture;","import React, { useRef, useEffect } from \"react\";\r\nimport io from \"socket.io-client\";\r\nimport PhotoCapture from \"./PhotoCapture\";\r\nimport axios from 'axios';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    maxWidth: 345,\r\n  },\r\n  media: {\r\n    height: 140,\r\n  },\r\n});\r\n\r\n\r\nconst Room = (props) => {\r\n\r\n    const classes = useStyles();\r\n\r\n    const userVideo = useRef();\r\n    const partnerVideo = useRef();\r\n    const peerRef = useRef();\r\n    const socketRef = useRef();\r\n    const otherUser = useRef();\r\n    const userStream = useRef();\r\n    var cards = [];\r\n    var photos = [];\r\n\r\n    useEffect(() => {\r\n        navigator.mediaDevices.getUserMedia({ audio: true, video: true }).then(stream => {\r\n            userVideo.current.srcObject = stream;\r\n            userStream.current = stream;\r\n            \r\n            localStorage.setItem( 'cam' , true );\r\n\r\n            socketRef.current = io.connect(\"/\");\r\n            socketRef.current.emit(\"join room\", props.match.params.roomID);\r\n\r\n            socketRef.current.on('other user', userID => {\r\n                callUser(userID);\r\n                otherUser.current = userID;\r\n            });\r\n\r\n            socketRef.current.on(\"user joined\", userID => {\r\n                otherUser.current = userID;\r\n            });\r\n\r\n            socketRef.current.on(\"offer\", handleRecieveCall);\r\n\r\n            socketRef.current.on(\"answer\", handleAnswer);\r\n\r\n            socketRef.current.on(\"ice-candidate\", handleNewICECandidateMsg);\r\n\r\n        });\r\n\r\n    }, [ ]);\r\n\r\n    function callUser(userID) {\r\n        peerRef.current = createPeer(userID);\r\n        userStream.current.getTracks().forEach(track => peerRef.current.addTrack(track, userStream.current));\r\n    }\r\n\r\n    function createPeer(userID) {\r\n        const peer = new RTCPeerConnection({\r\n            iceServers: [\r\n                {\r\n                    urls: \"stun:stun.stunprotocol.org\"\r\n                },\r\n                {\r\n                    urls: 'turn:numb.viagenie.ca',\r\n                    credential: 'muazkh',\r\n                    username: 'webrtc@live.com'\r\n                },\r\n            ]\r\n        });\r\n\r\n        peer.onicecandidate = handleICECandidateEvent;\r\n        peer.ontrack = handleTrackEvent;\r\n        peer.onnegotiationneeded = () => handleNegotiationNeededEvent(userID);\r\n\r\n        return peer;\r\n    }\r\n\r\n    function handleNegotiationNeededEvent(userID) {\r\n        peerRef.current.createOffer().then(offer => {\r\n            return peerRef.current.setLocalDescription(offer);\r\n        }).then(() => {\r\n            const payload = {\r\n                target: userID,\r\n                caller: socketRef.current.id,\r\n                sdp: peerRef.current.localDescription\r\n            };\r\n            socketRef.current.emit(\"offer\", payload);\r\n        }).catch(e => console.log(e));\r\n    }\r\n\r\n    function handleRecieveCall(incoming) {\r\n        peerRef.current = createPeer();\r\n        const desc = new RTCSessionDescription(incoming.sdp);\r\n        peerRef.current.setRemoteDescription(desc).then(() => {\r\n            userStream.current.getTracks().forEach(track => peerRef.current.addTrack(track, userStream.current));\r\n        }).then(() => {\r\n            return peerRef.current.createAnswer();\r\n        }).then(answer => {\r\n            return peerRef.current.setLocalDescription(answer);\r\n        }).then(() => {\r\n            const payload = {\r\n                target: incoming.caller,\r\n                caller: socketRef.current.id,\r\n                sdp: peerRef.current.localDescription\r\n            }\r\n            socketRef.current.emit(\"answer\", payload);\r\n        })\r\n    }\r\n\r\n    function handleAnswer(message) {\r\n        const desc = new RTCSessionDescription(message.sdp);\r\n        peerRef.current.setRemoteDescription(desc).catch(e => console.log(e));\r\n    }\r\n\r\n    function handleICECandidateEvent(e) {\r\n        if (e.candidate) {\r\n            const payload = {\r\n                target: otherUser.current,\r\n                candidate: e.candidate,\r\n            }\r\n            socketRef.current.emit(\"ice-candidate\", payload);\r\n        }\r\n    }\r\n\r\n    function handleNewICECandidateMsg(incoming) {\r\n        const candidate = new RTCIceCandidate(incoming);\r\n\r\n        peerRef.current.addIceCandidate(candidate)\r\n            .catch(e => console.log(e));\r\n    }\r\n\r\n    function handleTrackEvent(e) {\r\n        // if ( ! partnerVideo.current === null )\r\n        partnerVideo.current.srcObject = e.streams[0];\r\n    };\r\n\r\n    function handleHang()\r\n    {\r\n        \r\n        localStorage.setItem( 'cam' , false );\r\n        const tracks = document.getElementById('video').srcObject.getTracks();\r\n        tracks.forEach(track => {\r\n            track.stop();\r\n        });\r\n\r\n        if ( ! partnerVideo.current === null ) {\r\n            partnerVideo.current.srcObject.getTracks().forEach(track => track.stop());\r\n        }\r\n        \r\n        if ( ! peerRef.current === null ) peerRef.current.close();\r\n        console.log(\"cam closed!!\");\r\n        console.log(photos);\r\n        localStorage.setItem('photos' , JSON.stringify(photos) );\r\n        setTimeout(props.history.push('/') , 60000);\r\n        \r\n    }\r\n     \r\n    function handleCapture(){\r\n        if( !(userVideo.current === \"undefined\") && ! ( partnerVideo === \"indefined\" ) )\r\n            {\r\n                // console.log( userVideo.current );\r\n                var cnt = 0;\r\n                alert(\"moment capturing started!\");\r\n                function mytimer(){\r\n\r\n                    var photo =  PhotoCapture( );\r\n                    // photos.push(photo);\r\n                    console.log(photo);\r\n                    // // photo => [ baseurl , baseurl ]\r\n                    // api call data.photo[0] & data.photo[1] =>  state +\"#\" + emoji \r\n                    let axiosConfig = {\r\n                        headers: {\r\n                            'Content-Type': 'application/json;charset=UTF-8',\r\n                            \"Access-Control-Allow-Origin\": \"*\",\r\n                        }\r\n                      };\r\n                    var data1 = \"\";\r\n                    var data2 = \"\";\r\n                    var a={'angry': 'ðŸ˜ ','disgust': 'ðŸ¤¢', 'fear': 'ðŸ˜±', 'happy':'ðŸ˜', 'sad': 'â˜¹ï¸', 'surprise': 'ðŸ˜®', 'neutral' : 'ðŸ˜'};\r\n                    var payload = [ { 'state':'neutral'  , 'emoji':'ðŸ˜' , 'baseurl': \"photo[0]\" } , { 'state': 'neutral' , 'emoji':'ðŸ˜' , 'baseurl':\"photo[1]\" } ];\r\n                    \r\n                    axios.post(\"http://139.59.45.17:4567/\" ,  { \"baseurl\": photo[0] } , axiosConfig )\r\n                    .then(r => { \r\n                        console.log(r);\r\n                        data1 = r.data; \r\n                        payload[0]['state'] = data1.slice(0 , data1.length-3 );\r\n                        payload[0]['emoji'] = a[payload[0]['state']];\r\n                    } )\r\n                    .catch(e => console.log(e) );\r\n\r\n                    axios.post(\"http://139.59.45.17:4567/\" ,  { \"baseurl\": photo[1] } , axiosConfig )\r\n                    .then(r => { \r\n                        console.log(r); data2 = r.data; \r\n                        payload[1]['state'] = data2.slice(0 , data2.length-3 );\r\n                        payload[1]['emoji'] = a[payload[1]['state']];\r\n                    } )\r\n                    .catch(e => console.log(e) );\r\n\r\n                    // console.log(payload[0]);\r\n                    photos.push(payload);\r\n                    // photos.push([data1 , data2]);\r\n                    cnt++;\r\n                    const status = localStorage.getItem('cam');\r\n                    if( cnt === 7 && status ) clearInterval(myvar);\r\n                }\r\n                var myvar = setInterval( mytimer , 60000);\r\n                \r\n            }\r\n    }\r\n\r\n    return (\r\n        <Grid container spacing={1}>\r\n            <Grid item xs={6}>\r\n                <Card className={classes.root}>\r\n            <CardActionArea>\r\n                <video id = \"video\" autoPlay ref={userVideo} width=\"100%\" height =\"100%\"></video>\r\n                <CardContent>\r\n                <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n                    User\r\n                </Typography>\r\n                <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n                    room Id : { props.match.params.roomID } \r\n                </Typography>\r\n                </CardContent>\r\n            </CardActionArea>\r\n            <CardActions>\r\n                <Button size=\"small\" variant=\"contained\" color=\"primary\" id=\"startbutton\" onClick={handleCapture} >\r\n                Start Capture Moments!\r\n                </Button>\r\n                <Button size=\"small\" variant=\"contained\" color=\"secondary\" id=\"hangbtn\" onClick={handleHang} >\r\n                Hang Up\r\n                </Button>\r\n            </CardActions>\r\n        </Card>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n                <Card className={classes.root}>\r\n            <CardActionArea>\r\n                <video id=\"partnerVideo\" autoPlay ref={partnerVideo} width=\"100%\" height =\"100%\"></video>\r\n                <CardContent>\r\n                    <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n                        Partner\r\n                    </Typography>\r\n                </CardContent>\r\n            </CardActionArea>\r\n        </Card>\r\n            </Grid>\r\n            <Grid item xs={12} >\r\n                {cards}\r\n            </Grid>\r\n      </Grid>\r\n    );\r\n};\r\n\r\nexport default Room;","import React from 'react';\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport CreateRoom from \"./routes/CreateRoom\";\nimport Room from \"./routes/Room\";\nimport './App.css';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n  },\n}));\n\nfunction App() {\n  const classes = useStyles();\n\n  return (\n\n    <div className={classes.root}>\n\n    <Grid container spacing={3}>\n    <Grid item xs={12}>\n        <Paper className={classes.paper}>\n        <Typography gutterBottom variant=\"h3\" component=\"h2\">\n                  LOOK </Typography>\n          \n        </Paper>\n      </Grid>\n      <Grid item xs={12}>\n        <Paper className={classes.paper}>\n          <BrowserRouter>\n          <Switch>\n            <Route path=\"/\" exact component={CreateRoom} />\n            <Route path=\"/room/:roomID\" component={Room} />\n          </Switch>\n          </BrowserRouter>\n        </Paper>\n      </Grid>\n      <Grid item xs={12}>\n        <Paper className={classes.paper}>\n        <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                    recent captured moment! </Typography>\n          <div id=\"pictures\">\n            <img id = \"photo\"/>\n            <canvas id=\"canvas\" width=\"320\" height=\"240\" ></canvas>\n            <canvas id=\"partnerCanvas\" width=\"320\" height=\"240\" ></canvas>\n          </div>\n        </Paper>\n      </Grid>\n    </Grid>\n  </div>\n\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}